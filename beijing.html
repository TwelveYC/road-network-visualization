<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>北京</title>
    <script src="./d3.js"></script>
    <script src="./static/js/topojson.js"></script>
</head>
<body>
    <svg id="mainsvg" width="1200" height="1000"></svg>
    <script>
        const svg = d3.select("svg");
        const width = +svg.attr('width');
        const height = +svg.attr('height');
        const margin = {top: 120, right: 50, bottom: 50, left: 120};
        const innerWidth = width - margin.left - margin.right;
        const innerHeight = height - margin.top - margin.bottom;
        const g = svg.append('g')
        .attr('id', 'maingroup')
        .attr("transform", `translate(${margin.left}, ${margin.top})`);
        const projection = d3.geoNaturalEarth1();
        const geo = d3.geoPath().projection(projection);

        d3.json("/data/北京市.json").then(res => {
            console.log(res);

             let meta = topojson.feature(res, res.features[0].geometry.coordinates);
            projection.fitSize([innerWidth, innerHeight]);
            console.log(projection([116.436488,39.902042])) 
            g.selectAll("path")
                .data(meta.features)
                .join("path")
                .attr("d",geo)
                .attr("stroke-width", 2)
        })
    </script>
</body>
</html>